# Cash Register PDF Generator

Этот проект представляет собой сервер на основе Django, который генерирует PDF-файлы кассовых чеков и предоставляет их через QR-коды. После генерации PDF-файлы сохраняются на сервере, а клиент получает QR-код, с помощью которого можно скачать PDF-файл.

## Основные функции

- Принимает список товаров (с указанием их ID) через POST-запрос.
- Генерирует PDF-файл с кассовым чеком, где отображаются товары, их количество и общая сумма.
- Создает QR-код, содержащий ссылку на PDF-файл.
- Возвращает QR-код клиенту в качестве ответа.
- По ссылке, закодированной в QR-коде, можно скачать PDF-файл.

## Используемые технологии

- **Django**: Основной веб-фреймворк.
- **Django REST Framework**: Для обработки API-запросов.
- **pdfkit**: Для генерации PDF-файлов на основе HTML-шаблонов.
- **qrcode**: Для генерации QR-кодов.
- **wkhtmltopdf**: Для конвертации HTML в PDF.

## Установка

### Шаг 1: Клонируйте репозиторий

```bash
git clone https://github.com/username/cash-register-pdf-generator.git
cd cash-register-pdf-generator
```

### Шаг 2: Создайте виртуальное окружение

```
python3 -m venv venv
source venv/bin/activate  # Для Linux/MacOS# или
venv\Scripts\activate  # Для Windows
```

### Шаг 3: Установите зависимости
```
pip install -r requirements.txt
```

### Шаг 4: Установите wkhtmltopdf

Для корректной работы библиотеки pdfkit требуется установленный инструмент wkhtmltopdf. Вы можете скачать его с официального сайта и следовать инструкциям для вашей ОС.

### Шаг 5: Наполните базу данных предустановленными данными

```
python3 manage.py load_data items.json
```

### Шаг 6: Выполните миграции базы данных

```
python3 manage.py makemigrations
python3 manage.py migrate
```

### Шаг 7: Запустите сервер разработки

```
python3 manage.py runserver <id_addr:port> (IP и порт вашей локальной сети)
```

## API Использование
#### 1. Генерация кассового чека и QR-кода

    URL: /cash_machine
    Метод: POST

    Тело запроса:
    {
    "items": [1, 2, 3]
    }   
  
* items: Массив ID товаров.

Ответ: QR-код в формате PNG, содержащий ссылку на PDF-файл кассового чека.

#### 2. Загрузка PDF-файла через QR-код
    URL: /media/cash_register.pdf
    Метод: GET

Этот запрос возвращает сгенерированный PDF-файл чека.


## Конфигурация
Основные конфигурационные параметры находятся в файле settings.py:

* MEDIA_ROOT: Директория для сохранения медиафайлов, включая PDF-файлы.
* MEDIA_URL: URL для доступа к медиафайлам.
* PDF_NAME: Имя сгенерированного PDF-файла.
* PDF_PATH: Полный путь к PDF-файлу на сервере.
* LOCALHOST: Адрес вашего сервера, используемый для генерации ссылки в QR-коде.